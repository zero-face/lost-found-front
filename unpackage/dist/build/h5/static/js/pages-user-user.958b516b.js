(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"04c1":function(t,e,n){"use strict";var i=n("a6f9"),s=n.n(i);s.a},"0a8b":function(t,e,n){"use strict";n.r(e);var i=n("b766"),s=n("8629");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("04c1");var u,c=n("f0c5"),o=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,"698c0b9c",null,!1,i["a"],u);e["default"]=o.exports},8629:function(t,e,n){"use strict";n.r(e);var i=n("91ef"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},"896f":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* uni.scss */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.second[data-v-698c0b9c]{margin-top:%?20?%;background:#fff}.mess[data-v-698c0b9c]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?20?%;padding:%?20?% %?10?% %?10?% %?100?%;height:%?70?%;width:100%}.pub[data-v-698c0b9c]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?20?%;padding:%?20?% 0 0 %?100?%;height:%?70?%;width:100%}.icon[data-v-698c0b9c]{height:%?20?%;width:%?30?%}.content[data-v-698c0b9c]{height:92.5vh;background:#eee}.box[data-v-698c0b9c]{background-color:red}.info[data-v-698c0b9c]{background:#fff;height:auto;width:100%;padding:%?30?% %?0?% %?30?% %?20?%;display:-webkit-box;display:-webkit-flex;display:flex}.info .pic[data-v-698c0b9c]{line-height:%?30?%;width:20%}.info .user[data-v-698c0b9c]{font-size:%?30?%;margin-left:%?5?%;line-height:%?130?%}.info .right[data-v-698c0b9c]{float:right;margin-left:%?280?%;width:20%;line-height:%?100?%;height:100%}.renzheng[data-v-698c0b9c]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?20?%;background:#fff;padding:%?20?% 0 %?10?% %?25?%}.text[data-v-698c0b9c]{padding-left:%?10?%}',""]),t.exports=e},"91ef":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{background:{backgroundImage:"linear-gradient(45deg, rgb(255, 255, 127), rgb(141, 198, 63))"},text:"用户未登录",user:{},mes:[],id:0}},methods:{sub:function(){var e=this;this.$goEasy.subscribe({channel:this.$store.state.userInfo.id+"",onMessage:function(n){t.log("Channel:"+n.channel+" content:"+n.content),e.$store.state.mesNum++,t.log(JSON.parse(n.content).type),"0"==JSON.parse(n.content).type?e.$store.state.systemNum++:1==JSON.parse(n.content).type?(e.$store.state.contactNum++,t.log(e.$store.state.contactNum)):"3"==JSON.parse(n.content).type?e.$store.state.commentNum++:"4"==JSON.parse(n.content).type&&e.$store.state.likeNum++},onSuccess:function(){t.log("Subscribe successfully.")},onFailed:function(){t.log("Subscribe successfully.")}})},login:function(){var e=this;uni.getUserProfile({desc:"用户登录，填充用户基本信息",lang:"zh_CN",success:function(n){t.log(n),e.user=n.userInfo,uni.login({scopes:"auth_user",success:function(t){e.$store.dispatch("login",[t.code,e.user]),e.sub()},fail:function(e){t.log(e)}})},fail:function(e){t.log(e)}})},myPub:function(t){uni.navigateTo({url:"/pages/myPub/myPub?id="+t})},mess:function(e,n){t.log("用户id:"+e),uni.navigateTo({url:"/pages/mesDetail/mesDetail?id="+e})},detail:function(){var t=uni.getStorageSync("token"),e=this.$userInfo.getUsername();void 0!=t?(this.$store.dispatch("checkToken",[t,e]),this.sub()):this.$store.state.isExpired=!1},auditMes:function(){this.$goEasy.subscribe({channel:this.$store.state.userInfo.id,onMessage:function(e){t.log("subChannel:"+e.channel+" content:"+e.content),this.mesNum++},onSuccess:function(){t.log("Subscribe successfully.")},onFailed:function(){t.log("Subscribe successfully.")}})},auth:function(t,e){null!=e&&null!=t?uni.navigateTo({url:"/pages/auth/auth?id="+t+"&isTrue="+e}):uni.showToast({title:"请先登录"})},userDetail:function(t){null!=t?uni.navigateTo({url:"../UserDetail/UserDetail?id="+t}):uni.showToast({title:"请先登录",icon:"error"})},preview:function(e){uni.previewImage({urls:[e],longPressActions:{itemList:["保存图片","收藏"],success:function(e){t.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){t.log(e.errMsg)}}})}},onLoad:function(){this.detail(),this.auditMes()},computed:{mesNum:function(){return this.$store.state.mesNum},userInfo:function(){return this.$store.state.userInfo},isExpired:function(){return this.$store.state.isExpired}}};e.default=n}).call(this,n("5a52")["default"])},a6f9:function(t,e,n){var i=n("896f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("9afae9ac",i,!0,{sourceMap:!1,shadowMode:!1})},b766:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uNavbar:n("59a7").default,uAvatar:n("7056").default,uIcon:n("d0ac").default,uCellGroup:n("f764").default,uCellItem:n("6b35").default,uBadge:n("a718").default},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",[n("u-navbar",{attrs:{"back-icon-color":"#fff",background:t.background,title:"个人中心","is-back":!1,"title-bold":!0}})],1),n("v-uni-view",[n("v-uni-view",{staticClass:"info"},[n("v-uni-view",{staticClass:"pic"},[n("u-avatar",{attrs:{size:"large",src:t.userInfo.addressUrl,mode:"circle"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.preview(t.userInfo.addressUrl)}}})],1),0==t.isExpired?n("v-uni-view",{staticClass:"user",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("请重新登录")]):n("v-uni-view",{staticClass:"user",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.userDetail(t.userInfo.id)}}},[t._v(t._s(t.userInfo.nickName))]),n("v-uni-view",[n("u-icon",{staticClass:"right",attrs:{size:"35rpx",name:"arrow-right"}})],1)],1)],1),n("v-uni-view",[n("v-uni-view",{staticClass:"renzheng",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.auth(t.userInfo.id,t.userInfo.isTrue)}}},[n("v-uni-view",{staticClass:"image-content"},[n("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx","background-color":"#eeeeee"},attrs:{mode:"aspectFit",src:"https://tse2-mm.cn.bing.net/th/id/OIP-C.erfN5tHcyMygj3deWc3trgAAAA?w=176&h=180&c=7&o=5&dpr=1.12&pid=1.7"}})],1),n("v-uni-view",{staticClass:"text"},[t._v("实名认证")])],1),n("v-uni-view",{staticClass:"second"},[n("u-cell-group",[n("u-cell-item",{attrs:{icon:"bell-fill",title:"消息通知"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mess(t.userInfo.id,t.mesNum)}}},[n("u-badge",{attrs:{"is-dot":!1,type:"error",count:t.mesNum}})],1),n("u-cell-item",{attrs:{icon:"file-text-fill",title:"我的发布"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.myPub(t.userInfo.id)}}}),n("u-cell-item",{attrs:{icon:"coupon-fill",title:"领取地点"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.myPub(t.userInfo.id)}}})],1)],1)],1)],1)},a=[]}}]);