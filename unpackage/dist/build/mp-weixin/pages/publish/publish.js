(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/publish/publish"],{2266:function(e,t,n){},"495e":function(e,t,n){"use strict";n.r(t);var o=n("e34e"),r=n("6ce8");for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n("dc7c");var i,s=n("f0c5"),c=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=c.exports},"6ce8":function(e,t,n){"use strict";n.r(t);var o=n("a42a"),r=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=r.a},a42a:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{action:"http://localhost:8888/api/v1/lost/upload",pictureUrl:"",params:{year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!1},token:"",fileList:[],list:["失物","寻物"],meslist:["请注意：失物发布和寻物发布使用同一个表单，失物发布必须上传照片，寻物发布可以不用上传照片，寻物失物的发布都代表本人，一旦发布认定丢失（寻找人）都是发布者"],background:{backgroundImage:"linear-gradient(45deg, rgb(28, 187, 180), rgb(141, 198, 63))"},current:0,form:{name:"",des:"",time:"",type:0,address:""},selectedTime:"",show:!1,shows:!1,errorType:["message","border-bottom"],rules:{name:[{required:!0,message:"必填字段",trigger:["blur","change"]}],des:[{required:!0,message:"必填字段",trigger:["blur","change"]}],time:[{required:!0,message:"必填字段",trigger:["blur","change"]}],address:[{required:!0,message:"必填字段",trigger:["blur","change"]}]}}},computed:{isPub:function(){return this.$store.state.isPub},type:function(){return this.$store.state.type},userInfo:function(){return this.$store.state.userInfo},isExpired:function(){return this.$store.state.isExpired}},onShow:function(){},onReady:function(){this.$refs.uForm.setRules(this.rules)},onLoad:function(){var t=e.getStorageSync("token"),n=this.$userInfo.getUsername();void 0!=t?(this.$store.dispatch("checkToken",[t,n]),this.$store.dispatch("getType")):this.$store.state.isExpired=!1},methods:{errorUpload:function(e,t,n,o){console.log(e)},successUpload:function(t,n,o,r){"success"==t.status?(this.pictureUrl=t.data,e.showToast({title:"图片上传成功",icon:"success"})):(this.pictureUrl="",e.showToast({title:"图片上传失败",icon:"error"}))},selectTime:function(e){this.form.time=e.year+"-"+e.month+"-"+e.day,this.selectedTime=e.year+"年"+e.month+"月"+e.day+"日"+e.hour+"时"+e.minute+"分"},showTime:function(){this.shows=!0},submit:function(t,n,o){var r=this;console.log("开始验证"),this.$refs.uForm.validate((function(u){u?(console.log("验证通过"),"0"==r.current?null!=r.pictureUrl&&r.pictureUrl.length>0?(r.$store.dispatch("submitLoss",[Date.parse(r.form.time),n,r.form.name,r.pictureUrl,r.form.address,t,r.form.des]),o?(r.clear(),o=!1,console.log("发布成功")):console.log("发布失败")):(e.showToast({title:"图片上传失败",icon:"warning"}),setTimeout((function(){e.hideToast()}),1e3)):(console.log("发布寻物"),console.log(n),r.$store.dispatch("submitFound",[Date.parse(r.form.time),n,r.form.name,r.pictureUrl,r.form.address,t,r.form.des]),o?(r.clear(),o=!1,console.log("发布成功")):console.log("发布失败"))):console.log("验证失败")}))},confir:function(e){this.index=e[0],this.form.type=e[0]},clicki:function(){this.show=!0},sectionChange:function(e){this.current=e,this.clear()},clear:function(){this.form.time="",this.form.name="",this.pictureUrl="",this.form.address="",this.form.type=0,this.selectedTime="",this.form.des=""}}};t.default=n}).call(this,n("543d")["default"])},d8ba:function(e,t,n){"use strict";(function(e){n("1a67");o(n("66fd"));var t=o(n("495e"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},dc7c:function(e,t,n){"use strict";var o=n("2266"),r=n.n(o);r.a},e34e:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"59a7"))},uNoticeBar:function(){return n.e("uview-ui/components/u-notice-bar/u-notice-bar").then(n.bind(null,"df85"))},uSubsection:function(){return n.e("uview-ui/components/u-subsection/u-subsection").then(n.bind(null,"a473"))},uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"64c9"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"cc10"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"af8a"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"e8d8"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"3e26"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"0729"))}},r=function(){var e=this,t=e.$createElement;e._self._c},u=[]}},[["d8ba","common/runtime","common/vendor"]]]);