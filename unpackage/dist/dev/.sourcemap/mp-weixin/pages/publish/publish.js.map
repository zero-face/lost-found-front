{"version":3,"sources":["uni-app:///main.js","webpack:///F:/JAVA/code/微信小程序/lost&foundFront/lost&found/pages/publish/publish.vue?94bf","webpack:///F:/JAVA/code/微信小程序/lost&foundFront/lost&found/pages/publish/publish.vue?fced","webpack:///F:/JAVA/code/微信小程序/lost&foundFront/lost&found/pages/publish/publish.vue?782e","webpack:///F:/JAVA/code/微信小程序/lost&foundFront/lost&found/pages/publish/publish.vue?a209","uni-app:///pages/publish/publish.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACsL;AACtL,gBAAgB,uLAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnFA;AAAA;AAAA;AAAA;AAAmsB,CAAgB,mqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgGvtB;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,kCAFA;AAGA,gCAHA;AAIA,gBAJA;AAKA,6DALA;AAMA,oBANA;AAOA,eAPA;AAQA;AACA,UADA;AAEA,UAFA,CARA;;AAYA,6FAZA;AAaA;AACA,uFADA,EAbA;AAeA,gBAfA;AAgBA;AACA,gBADA;AAEA,eAFA;AAGA,gBAHA;AAIA,eAJA;AAKA,mBALA,EAhBA;;AAuBA,sBAvBA;AAwBA,iBAxBA;AAyBA,kBAzBA;AA0BA,6CA1BA;AA2BA;AACA;AACA,wBADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,qCAJA,GADA;;AAOA;AACA,wBADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,qCAJA,GAPA;;AAaA;AACA,wBADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,qCAJA,GAbA,EA3BA;;;;;AAiDA,GAnDA;AAoDA;AACA,SADA,mBACA;AACA;AACA,KAHA;AAIA,QAJA,kBAIA;AACA;AACA,KANA;AAOA,YAPA,sBAOA;AACA;AACA,KATA;AAUA,aAVA,uBAUA;AACA;AACA,KAZA,EApDA;;AAkEA,QAlEA,oBAkEA;AACA,GAnEA;AAoEA,SApEA,qBAoEA;AACA;AACA;AACA;AACA,GAxEA;AAyEA,QAzEA,oBAyEA;AACA;AACA,GA3EA;AA4EA;AACA,aADA,qBACA,IADA,EACA,KADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlBA;AAmBA;AACA,WApBA,qBAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9BA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,cAnDA,sBAmDA,KAnDA,EAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1DA;;AA4DA,UA5DA,oBA4DA;AACA;AACA;AACA,KA/DA;AAgEA,YAhEA,sBAgEA;AACA;AACA,KAlEA;AAmEA,UAnEA,kBAmEA,IAnEA,EAmEA,GAnEA,EAmEA,KAnEA,EAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAJA,MAIA;AACA;AACA;AACA,mBAbA,MAaA;AACA;AACA,qCADA,EACA,eADA;;AAGA;AACA;AACA,qBAFA,EAEA,IAFA;AAGA;AACA,iBAtBA,MAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AApDA,2EAqDA,CAxHA;AAyHA,UAzHA,kBAyHA,KAzHA,EAyHA;AACA;AACA;AACA;AACA;AACA,KA9HA;AA+HA,cA/HA,wBA+HA;AACA;AACA,KAjIA;AAkIA,UAlIA,oBAkIA;AACA;AACA,KApIA;AAqIA,iBArIA,yBAqIA,KArIA,EAqIA;AACA;AACA;AACA,KAxIA;AAyIA,SAzIA,mBAyIA;AACA;AACA,yBADA;AAEA,0BAFA;AAGA,4BAHA;AAIA,wBAJA;AAKA,4BALA;AAMA,wBANA;AAOA,KAjJA;AAkJA;AACA,aAnJA,qBAmJA,KAnJA,EAmJA;AACA;AACA,KArJA;AAsJA;AACA,aAvJA,qBAuJA,KAvJA,EAuJA;AACA;AACA;AACA,qBAHA,GAGA,qBAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAbA,GAaA,CAbA,cAaA,gBAbA;AAcA,0CAdA;AAeA,wDAfA,SAeA,MAfA,yBAaA,GAbA;;;;;;;;;AAwBA,KA/KA;AAgLA,qBAhLA,6BAgLA,GAhLA,EAgLA;AACA;AACA;AACA;AACA,6DADA,EACA;AACA,uBAFA;AAGA,yBAHA;AAIA;AACA,wBADA,EAJA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,+BAFA;;AAIA,aAPA,MAOA;AACA;AACA;AACA;AACA,+BADA;AAEA,6BAFA;;AAIA;AACA,WA1BA;;AA4BA,OA7BA;AA8BA,KAhNA,EA5EA,E","file":"pages/publish/publish.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/publish/publish.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./publish.vue?vue&type=template&id=177a8126&\"\nvar renderjs\nimport script from \"./publish.vue?vue&type=script&lang=js&\"\nexport * from \"./publish.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/publish/publish.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=template&id=177a8126&\"","var components\ntry {\n  components = {\n    uNavbar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-navbar/u-navbar\" */ \"@/uview-ui_2.0.4/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uNoticeBar: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui_2.0.4/components/u-notice-bar/u-notice-bar.vue\"\n      )\n    },\n    uSubsection: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-subsection/u-subsection\" */ \"@/uview-ui_2.0.4/components/u-subsection/u-subsection.vue\"\n      )\n    },\n    \"u-Form\": function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u--form/u--form\" */ \"@/uview-ui_2.0.4/components/u--form/u--form.vue\"\n      )\n    },\n    uFormItem: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-form-item/u-form-item\" */ \"@/uview-ui_2.0.4/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    \"u-Input\": function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u--input/u--input\" */ \"@/uview-ui_2.0.4/components/u--input/u--input.vue\"\n      )\n    },\n    uDatetimePicker: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-datetime-picker/u-datetime-picker\" */ \"@/uview-ui_2.0.4/components/u-datetime-picker/u-datetime-picker.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-button/u-button\" */ \"@/uview-ui_2.0.4/components/u-button/u-button.vue\"\n      )\n    },\n    uPicker: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-picker/u-picker\" */ \"@/uview-ui_2.0.4/components/u-picker/u-picker.vue\"\n      )\n    },\n    uUpload: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui_2.0.4/components/u-upload/u-upload\" */ \"@/uview-ui_2.0.4/components/u-upload/u-upload.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.shows = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js&\"","<template>\n\t<!-- <u-overlay show=\"true\" @click=\"show = false\">\r\n\t\t<view style=\"display: flex; height: 100vh; position: fixed;z-index:999;right: 15rpx; \r\n\t\tbottom:0;left: 0rpx;\">\r\n\t\t\t<view style=\"height: 200rpx; width: 200rpx;\">\r\n\t\t\t\t<image style=\"height: 150rpx; width: 150rpx;\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRqAPJRAkSm3swZ6laKYbkgFQZsQDnMURDeFQ&usqp=CAU\">寻物启示</image>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"height: 200rpx; width: 200rpx;\">\r\n\t\t\t\t<image style=\"height: 150rpx; width: 150rpx;\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQMlOXlWk_1k3mIRzkr9NJPBiQ8XqQWHVg5Lw&usqp=CAU\">失物招领</image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</u-overlay> -->\r\n\t<view>\r\n\t\t<view>\r\n\t\t\t<u-navbar\r\n\t\t\t\ttitle=\"消息发布\"\r\n\t\t\t\tborder\r\n\t\t\t\ttitleWidth=\"300\"\r\n\t\t\t\tsafeAreaInsetTop\r\n\t\t\t\theight=\"50\"\r\n\t\t\t\tbgColor=\"#00aa7f\"\r\n\t\t\t\tdisLeft=\"false\"\r\n\t\t\t>\r\n\t\t\t</u-navbar>\r\n\t\t</view>\r\n\t\t <u-notice-bar :text=\"meslist\" mode=\"closable\" url=\"/pages/componentsB/tag/tag\"></u-notice-bar>\r\n\t\t<!-- <u-notice-bar mode=\"closable\" type=\"warning\" :is-circular=\"true\" :text=\"meslist\"></u-notice-bar> -->\r\n\t\t<view>\r\n\t\t\t\t<u-subsection width=\"20rpx\" @change=\"sectionChange\" bgColor=\"#72c35b\" active-color=\"#ff9900\" animation mode=\"button\" :list=\"list\" :current=\"current\"></u-subsection>\r\n\t\t</view>\r\n\t\t<!-- 表单 -->\n\t\t<view class=\"form\">\r\n\t\t\t<u--form \r\n\t\t\t:model=\"form\" \r\n\t\t\tref=\"uForm\" \r\n\t\t\t:error-type=\"errorType\" \r\n\t\t\tlabelPosition=\"bottom\">\r\n\t\t\t\t<u-form-item border-bottom leftIconStyle=\"margin:0\" leftIcon=\"bag\" label=\"物品名称\" prop=\"name\" label-width=\"200\">\r\n\t\t\t\t\t<u--input v-model=\"form.name\" placeholder=\"请输入物品名称\"/>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<u-form-item border-bottom label-position=top leftIconStyle=\"margin:0\" left-icon=\"coupon\" label=\"拾取(丢失)地点\" prop=\"address\" label-width=\"200\">\r\n\t\t\t\t\t<u--input v-model=\"form.address\" type=\"text\" placeholder=\"请详细描述拾取(丢失)地址\"/>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<u-form-item border-bottom label-position=top leftIconStyle=\"margin:0\" left-icon=\"calendar\" label=\"拾取(丢失)时间\" prop=\"time\" label-width=\"200\">\r\n\t\t\t\t\t<view>{{selectedTime}}</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<u--input v-model=\"value2\" type=\"text\" placeholder=\"请选择拾取(丢失)时间\" />\r\n\t\t\t\t\t<u-datetime-picker\r\n\t\t\t\t\t\tref=\"datetimePicker\"\r\n\t\t\t\t\t\t:show=\"shows\"\r\n\t\t\t\t\t\tv-model=\"value1\"\r\n\t\t\t\t\t\tmode=\"datetime\"\r\n\t\t\t\t\t\ttitle=\"选择时间\"\r\n\t\t\t\t\t\t:formatter=\"formatter\"\r\n\t\t\t\t\t\t @confirm=\"selectTime\"\r\n\t\t\t\t\t\t @cancel=\"pclose\"\r\n\t\t\t\t\t></u-datetime-picker>\r\n\t\t\t\t\t<u-button @click=\"shows = true\" :ripple=\"true\" plain hair-line=\"false\" size=\"mini\" shape=\"square\" type=\"primary\">选择时间</u-button>\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<u-form-item border-bottom label-position=top leftIconStyle=\"margin:0\" left-icon=\"attach\" label=\"物品描述\" prop=\"des\" label-width=\"200\">\r\n\t\t\t\t\t<u--input v-model=\"form.des\" type=\"text\" placeholder=\"请尽可能描述物品特征\" />\r\n\t\t\t\t</u-form-item>\r\n\t\t\t\t\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<u-form-item border-bottom label-position=top leftIconStyle=\"margin:0\" left-icon=\"list\" label=\"物品类型\" label-width=\"200\">\r\n\t\t\t\t\t\t<u--input  v-model=\"selectType\" type=\"text\" placeholder=\"请选择物品类型\" />\r\n\t\t\t\t\t\t<u-picker title=\"失物类型\" @confirm=\"confir\" :show=\"show\" :columns=\"type\" keyName=\"type\"></u-picker>\r\n\t\t\t\t\t\t<!-- <u-picker @confirm=\"confir\" title=\"失物类型\" :range=\"type\"  range-key=\"type\" :default-selector='[0]' :show=\"show\" mode=\"selector\"></u-picker>\t\t\t\t\t\t -->\r\n\t\t\t\t\t\t<u-button :ripple=\"true\" plain size=\"mini\" shape=\"square\" type=\"primary\" @click=\"clicki\">选择类型</u-button>\r\n\t\t\t\t\t</u-form-item>\r\n\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</u--form>\r\n\t\t\r\n\t\t\t<view>\r\n\t\t\t\t<u-upload\r\n\t\t\t\t\t:fileList=\"fileList3\"\r\n\t\t\t\t\t@afterRead=\"afterRead\"\r\n\t\t\t\t\t@delete=\"deletePic\"\r\n\t\t\t\t\tname=\"picture\"\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\t:maxCount=\"1\"\r\n\t\t\t\t\t:previewFullImage=\"true\"\r\n\t\t\t\t></u-upload>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<u-button :ripple=\"true\"  size=\"default\" shape=\"square\" type=\"primary\" @click=\"submit(form.type, userInfo.id, isPub)\">发布</u-button>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tselectType:\"\",\r\n\t\t\t\tcol:[[\"zhongguo\",\"riben\"]],\r\n\t\t\t\tvalue1: Number(new Date()),\r\n\t\t\t\tvalue2: \"\",\r\n\t\t\t\taction:\"http://123.57.220.238:8888/api/v1/lost/upload\",\r\n\t\t\t\tpictureUrl: \"\",\r\n\t\t\t\ttoken:\"\",\n\t\t\t\tlist: [\r\n\t\t\t\t\t\"失物\",\r\n\t\t\t\t\t\"寻物\"\r\n\t\t\t\t],\r\n\t\t\t\tmeslist: \"请注意：失物发布和寻物发布使用同一个表单，失物发布必须上传照片，寻物发布可以不用上传照片，寻物失物的发布都代表本人，一旦发布认定丢失（寻找人）都是发布者\",\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tbackgroundImage: 'linear-gradient(45deg, rgb(28, 187, 180), rgb(141, 198, 63))'},\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tdes: '',\r\n\t\t\t\t\ttime: '',\r\n\t\t\t\t\ttype: 0,\r\n\t\t\t\t\taddress:\"\"\r\n\t\t\t\t},\r\n\t\t\t\tselectedTime: \"\",\r\n\t\t\t\tshow: false, \r\n\t\t\t\tshows: false,\r\n\t\t\t\terrorType: ['message', 'border-bottom'],\r\n\t\t\t\trules: {\r\n\t\t\t\t\t'name': [{\r\n\t\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请填写姓名',\r\n\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t'address': [{\r\n\t\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请填写地址',\r\n\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t'des': [{\r\n\t\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请填写描述',\r\n\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t\t\n\t\t\t}\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisPub() {\r\n\t\t\t\treturn this.$store.state.isPub;\r\n\t\t\t},\r\n\t\t\ttype() {\r\n\t\t\t\treturn this.$store.state.type;\r\n\t\t\t},\r\n\t\t\tuserInfo() {\r\n\t\t\t\treturn this.$store.state.userInfo;\r\n\t\t\t},\r\n\t\t\tisExpired() {\r\n\t\t\t\treturn this.$store.state.isExpired;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\t\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$refs.uForm.setRules(this.rules);\r\n\t\t\t// 微信小程序需要用此写法\r\n\t\t\tthis.$refs.datetimePicker.setFormatter(this.formatter)\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.$store.dispatch(\"getType\");\r\n\t\t},\n\t\tmethods: {\r\n\t\t\tformatter(type, value) {\r\n\t\t\t\tif (type === 'year') {\r\n\t\t\t\t\treturn `${value}年`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'month') {\r\n\t\t\t\t\treturn `${value}月`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'day') {\r\n\t\t\t\t\treturn `${value}日`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'hour') {\r\n\t\t\t\t\treturn `${value}时`\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'minute') {\r\n\t\t\t\t\treturn `${value}分`\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t},\r\n\t\t\t//判断是否登录\r\n\t\t\tisLogin() {\r\n\t\t\t\t// 通过token拿名称再拿到用户信息\r\n\t\t\t\tlet token = uni.getStorageSync('token');\r\n\t\t\t\tlet username = this.$userInfo.getUsername();\r\n\t\t\t\t// 检验token是否过期\r\n\t\t\t\tif(token == undefined) {\r\n\t\t\t\t\tthis.$store.state.isExpired = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$store.dispatch(\"checkToken\",[token, username]);\r\n\t\t\t},\r\n\t\t\t// errorUpload(res, index, lists, name) {\r\n\t\t\t// \tconsole.log(res);\r\n\t\t\t// },\r\n\t\t\t// successUpload(data, index, lists, name) {\r\n\t\t\t// \tif(data.status == \"success\") {\r\n\t\t\t// \t\tthis.pictureUrl = data.data;\r\n\t\t\t// \t\tuni.showToast({\r\n\t\t\t// \t\t\ttitle: '图片上传成功',\r\n\t\t\t// \t\t\ticon:\"success\"\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}else {\r\n\t\t\t// \t\tthis.pictureUrl = \"\";\r\n\t\t\t// \t\tuni.showToast({\r\n\t\t\t// \t\t\ttitle: '图片上传失败',\r\n\t\t\t// \t\t\ticon:\"error\"\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\t\t\t\t\r\n\t\t\t// },\r\n\t\t\t\r\n\t\t\tselectTime(index) {\r\n\t\t\t\tthis.shows = false\r\n\t\t\t\tvar time = new Date(index.value)\r\n\t\t\t\tconsole.log(index.value)\r\n\t\t\t\tvar v = time.getFullYear() + \"年\" + time.getMonth() + \"月\" + time.getDay() +\"日\" + time.getHours() +\"时\" +time.getMinutes() + \"分\"\r\n\t\t\t\tthis.value2 = v\r\n\t\t\t\tthis.form.time = index.value\r\n\t\t\t},\r\n\t\r\n\t\t\tpclose() {\r\n\t\t\t\tthis.shows = false\r\n\t\t\t\tthis.value1 = \"\"\r\n\t\t\t},\r\n\t\t\tshowTime() {\r\n\t\t\t\tthis.shows = true\r\n\t\t\t},\r\n\t\t\tasync submit(type, uid, isPub) {\r\n\t\t\t\tconsole.log(\"开始验证\");\r\n\t\t\t\t// this.$refs.uForm.validateField(\"name\",\"des\").then(res => {\r\n\t\t\t\t\tuni.$u.toast('校验通过')\r\n\t\t\t\t\tconsole.log(\"验证成功\")\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tif(this.current == \"0\") {\r\n\t\t\t\t\t\tif(this.pictureUrl != null && this.pictureUrl.length > 0) {\t\r\n\t\t\t\t\t\t\tconsole.log(this.form.time)\r\n\t\t\t\t\t\t\tconsole.log(this.form.name)\r\n\t\t\t\t\t\t\tconsole.log(this.form.address)\r\n\t\t\t\t\t\t\tconsole.log(this.form.des)\r\n\t\t\t\t\t\t\tthis.$store.commit(\"submitLoss\",[this.form.time, uid, this.form.name, this.pictureUrl, this.form.address, type, this.form.des]);\r\n\t\t\t\t\t\t\tif(isPub == true) {\r\n\t\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t\t\tisPub=false;\r\n\t\t\t\t\t\t\t\tconsole.log(\"发布成功\");\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tconsole.log(\"发布失败\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:\"图片上传失败\",icon:\"warning\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsetTimeout(function (){\r\n\t\t\t\t\t\t\t\tuni.hideToast();\r\n\t\t\t\t\t\t\t},1000);\r\n\t\t\t\t\t\t}     \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"发布寻物\");\r\n\t\t\t\t\t\tconsole.log(uid);\r\n\t\t\t\t\t\tthis.$store.dispatch(\"submitFound\",[this.form.time,uid,this.form.name,this.pictureUrl,this.form.address,type,this.form.des]);\r\n\t\t\t\t\t\tif(isPub == true) {\r\n\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t\tisPub = false;\r\n\t\t\t\t\t\t\tconsole.log(\"发布成功\");\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tconsole.log(\"发布失败\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\t\r\n\t\t\t\t// }).catch(errors => {\r\n\t\t\t\t\t// uni.$u.toast('校验失败')\r\n\t\t\t\t\t// console.log('验证失败')\r\n\t\t\t\t// })\r\n\t\t\t\t// this.$refs.uForm.validate(valid => {\r\n\t\t\t\t// \tconsole.log(valid)\r\n\t\t\t\t// \tif (valid) {\r\n\t\t\t\t// \t\tconsole.log('验证通过');\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t},\r\n\t\t\tconfir(index) {\r\n\t\t\t\t// console.log(index.value[0].type)\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.selectType = index.value[0].type\r\n\t\t\t\tthis.form.type=index.value[0].typeId\r\n\t\t\t},\r\n\t\t\tcancelType() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t},\r\n\t\t\tclicki() {\r\n\t\t\t\tthis.show = true;\r\n\t\t\t},\n\t\t\tsectionChange(index) {\r\n\t\t\t\tthis.current = index;\r\n\t\t\t\tthis.clear();\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tthis.form.time=\"\",\r\n\t\t\t\tthis.form.name=\"\",\r\n\t\t\t\tthis.pictureUrl=\"\", \r\n\t\t\t\tthis.form.address=\"\",\r\n\t\t\t\tthis.form.type=0,\r\n\t\t\t\tthis.selectedTime=\"\",\r\n\t\t\t\tthis.form.des=\"\";\t\r\n\t\t\t},\r\n\t\t\t// 删除图片\r\n\t\t\tdeletePic(event) {\r\n\t\t\t\tthis[`fileList${event.name}`].splice(event.index, 1)\r\n\t\t\t},\r\n\t\t\t// 新增图片\r\n\t\t\tasync afterRead(event) {\r\n\t\t\t\t// console.log(\"11111\")\r\n\t\t\t\t// 当设置 mutiple 为 true 时, file 为数组格式，否则为对象格式\r\n\t\t\t\tlet lists = [].concat(event.file)\r\n\t\t\t\t// let fileListLen = this[`fileList${event.name}`].length\r\n\t\t\t\t// lists.map((item) => {\r\n\t\t\t\t// \tthis[`fileList${event.name}`].push({\r\n\t\t\t\t// \t\t...item,\r\n\t\t\t\t// \t\tstatus: 'uploading',\r\n\t\t\t\t// \t\tmessage: '上传中'\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t\t// console.log('test')\r\n\t\t\t\tfor (let i = 0; i < lists.length; i++) {\r\n\t\t\t\t\tconsole.log(lists[i].url)\r\n\t\t\t\t\tconst result = await this.uploadFilePromise(lists[i].url)\r\n\t\t\t\t\t// let item = this[`fileList${event.name}`][fileListLen]\r\n\t\t\t\t\t// this[`fileList${event.name}`].splice(fileListLen, 1, Object.assign(item, {\r\n\t\t\t\t\t// \tstatus: 'success',\r\n\t\t\t\t\t// \tmessage: '',\r\n\t\t\t\t\t// \turl: result\r\n\t\t\t\t\t// }))\r\n\t\t\t\t\t// fileListLen++\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuploadFilePromise(url) {\r\n\t\t\t\tconsole.log('开始上传图片')\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tlet a = uni.uploadFile({\r\n\t\t\t\t\t\turl: 'http://82.157.191.65:8888/api/v1/lost/upload', // 仅为示例，非真实的接口地址\r\n\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\tname: 'picture',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tuser: 'test'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\t\t\tres = JSON.parse(res.data)\r\n\t\t\t\t\t\t\t// console.log(res.status)\r\n\t\t\t\t\t\t\tif (res.status == \"success\") {\r\n\t\t\t\t\t\t\t\tconsole.log(\"图片上传成功\")\r\n\t\t\t\t\t\t\t\tthis.pictureUrl = res.data;\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '图片上传成功',\r\n\t\t\t\t\t\t\t\t\ticon:\"success\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(\"图片上传失败\")\r\n\t\t\t\t\t\t\t\tthis.pictureUrl = \"\";\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '图片上传失败',\r\n\t\t\t\t\t\t\t\t\ticon:\"error\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n</style>\n"],"sourceRoot":""}